[custom]
;解决DNS泄露，无分流群组


# drop DNS leakage from domestic ip checkers
ruleset=节点选择,https://raw.githubusercontent.com/YaoYinYing/AnyRelay/main/rules/masquerade.list

ruleset=谷歌学术,https://raw.githubusercontent.com/YaoYinYing/AnyRelay/main/rules/google_scholar.list

ruleset=DIRECT,https://raw.githubusercontent.com/YaoYinYing/AnyRelay/main/rules/force_direct.list
# direct for china related
ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list

ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list
ruleset=DIRECT,[]GEOIP,CN,no-resolve

ruleset=内网应用,https://raw.githubusercontent.com/YaoYinYing/AnyRelay/main/rules/japs_internal.list

ruleset=流媒体,https://raw.githubusercontent.com/YaoYinYing/AnyRelay/main/rules/force_not_to_relay.list

ruleset=流媒体,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
ruleset=流媒体,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list
ruleset=流媒体,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list


# keep them safe
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/OpenAi.list
ruleset=节点选择,https://raw.githubusercontent.com/juewuy/ShellClash/master/rules/ai.list
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleCNProxyIP.list
ruleset=节点选择,https://raw.githubusercontent.com/YaoYinYing/AnyRelay/main/rules/force_to_relay.list

ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Bing.list
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/OneDrive.list
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Direct.list
ruleset=节点选择,[]DOMAIN-SUFFIX,xn--ngstr-lra8j.com
ruleset=节点选择,[]DOMAIN-SUFFIX,services.googleapis.cn
ruleset=节点选择,[]DOMAIN-SUFFIX,probe.icloud.com
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleCNProxyIP.list

# block ads and malicious sites
ruleset=REJECT,https://raw.githubusercontent.com/YaoYinYing/AnyRelay/main/rules/mobile_antifraud.list
ruleset=REJECT,https://raw.githubusercontent.com/YaoYinYing/AnyRelay/main/rules/my_block.list
ruleset=REJECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
ruleset=REJECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list

ruleset=REJECT,https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/adobe.list
ruleset=REJECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list






# final rule use for unmatched traffic
ruleset=节点选择,[]FINAL

# keep internal out

custom_proxy_group=内网应用`select`[]DIRECT`(JUMP|YNNU|CPB|Internal|Home|University)
# only use scholar for scholar traffic
custom_proxy_group=谷歌学术`select`(Scholar)`[]自动选择`[]REJECT
# only use awesome for normal traffic
custom_proxy_group=节点选择`select`[]自动选择`[]REJECT`(awesome)
custom_proxy_group=自动选择`url-test`[]REJECT`(awesome)`http://www.gstatic.com/generate_204`300,,50
# use non-awesome for streaming
custom_proxy_group=流媒体`url-test`[]REJECT`^((?!IEPL|JUMP|YNNU|CPB|Internal|Home|University|awesome|Scholar).)*$`http://www.gstatic.com/generate_204`300,,50

# fallback to any non internal group
custom_proxy_group=故障转移`fallback`^((?!IEPL|JUMP|YNNU|CPB|Internal|Home|University|Scholar).)*$`http://www.gstatic.com/generate_204`300,,50


enable_rule_generator=true
overwrite_original_rules=true